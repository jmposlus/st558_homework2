[
  {
    "objectID": "hw2.html",
    "href": "hw2.html",
    "title": "A Title About Programming 2: Attack of the Coders",
    "section": "",
    "text": "Task 1\nLet’s go ahead and make our two vectors, called pre and post.\n\npre&lt;- c(130, 128, 116, 124, 133, 134, 118, 126, 114, 127, 141, 138, 128, 140, 137, 131, 120, 128, 139, 135)\npost&lt;- c(114, 98, 113, 99, 107, 116, 113, 111, 119, 117, 101, 119, 130, 122, 106, 106, 124, 102, 117, 113)\n\nIt’s a good thing the homework specifies that the subjects match 1 through 20, because there’s literally nothing else which suggests this to be the case. To fix that, we’ll go ahead and give every one a name, or more accurately, a title followed by a number.\n\nnames(pre)&lt;- paste(\"Subject\", 1:20, sep = \"_\")\nnames(post)&lt;- paste(\"Subject\", 1:20, sep = \"_\")\n\nIf my parents used this naming convention, I would be child_1. Now we’re going to calculate the change in blood pressure across all patients.\n\nchange&lt;- pre-post\n\nNow that we have that, we can get the average change in blood pressure across all 20 subjects.\n\nmean(change)\n\n[1] 17\n\n\nThe average change is 17 points. Lower, because of the way that I did the subtraction. Of course not everyone experienced a decrease. Let’s find out who did.\n\nwhich(change&gt;0)\n\n Subject_1  Subject_2  Subject_3  Subject_4  Subject_5  Subject_6  Subject_7 \n         1          2          3          4          5          6          7 \n Subject_8 Subject_10 Subject_11 Subject_12 Subject_14 Subject_15 Subject_16 \n         8         10         11         12         14         15         16 \nSubject_18 Subject_19 Subject_20 \n        18         19         20 \n\n\nNext, it’s time to subset the change vector to return those that only have a positive change. Because I’m a time traveler, I saw the future, and I know I have to get the average, so I’ll do it twice, once for output, and once to save as its own vector to take the mean of later.\n\nchange[which(change&gt;0)]\n\n Subject_1  Subject_2  Subject_3  Subject_4  Subject_5  Subject_6  Subject_7 \n        16         30          3         25         26         18          5 \n Subject_8 Subject_10 Subject_11 Subject_12 Subject_14 Subject_15 Subject_16 \n        15         10         40         19         18         31         25 \nSubject_18 Subject_19 Subject_20 \n        26         22         22 \n\nposchange&lt;- change[which(change&gt;0)]\n\nNow it’s time to get the average decrease among patients who saw a decrease.\n\nmean(poschange)\n\n[1] 20.64706\n\n\nTask 2\nNow let’s organize all of this in a data frame. We’re going to have four columns, one for the “name”, pre and post BP, and one for the difference.\n\nblood&lt;- data.frame(patient = paste(\"Subject\", 1:20, sep = \"_\"),\n                   pre_bp = pre, \n                   post_bp = post,\n                   diff_bp = change)\n\nNow we are going to return only the rows where the diff_bp column is negative. That will correspond to the patients whose blood pressure actually increased.\n\nsubset(blood, diff_bp&lt;0)\n\n              patient pre_bp post_bp diff_bp\nSubject_9   Subject_9    114     119      -5\nSubject_13 Subject_13    128     130      -2\nSubject_17 Subject_17    120     124      -4\n\n\nIf I wanted the other subset of patients, all I’d need to do is flip the &lt; to a &gt;. Now, in any case, we want a True False indicator if the post treatment blood pressure is less than 120.\n\nblood$below120&lt;- ifelse(blood$post_bp&lt;120, TRUE, FALSE)\n\nAnd lastly, we get to make a pretty table.\n\nknitr::kable(blood)\n\n\n\n\n\npatient\npre_bp\npost_bp\ndiff_bp\nbelow120\n\n\n\n\nSubject_1\nSubject_1\n130\n114\n16\nTRUE\n\n\nSubject_2\nSubject_2\n128\n98\n30\nTRUE\n\n\nSubject_3\nSubject_3\n116\n113\n3\nTRUE\n\n\nSubject_4\nSubject_4\n124\n99\n25\nTRUE\n\n\nSubject_5\nSubject_5\n133\n107\n26\nTRUE\n\n\nSubject_6\nSubject_6\n134\n116\n18\nTRUE\n\n\nSubject_7\nSubject_7\n118\n113\n5\nTRUE\n\n\nSubject_8\nSubject_8\n126\n111\n15\nTRUE\n\n\nSubject_9\nSubject_9\n114\n119\n-5\nTRUE\n\n\nSubject_10\nSubject_10\n127\n117\n10\nTRUE\n\n\nSubject_11\nSubject_11\n141\n101\n40\nTRUE\n\n\nSubject_12\nSubject_12\n138\n119\n19\nTRUE\n\n\nSubject_13\nSubject_13\n128\n130\n-2\nFALSE\n\n\nSubject_14\nSubject_14\n140\n122\n18\nFALSE\n\n\nSubject_15\nSubject_15\n137\n106\n31\nTRUE\n\n\nSubject_16\nSubject_16\n131\n106\n25\nTRUE\n\n\nSubject_17\nSubject_17\n120\n124\n-4\nFALSE\n\n\nSubject_18\nSubject_18\n128\n102\n26\nTRUE\n\n\nSubject_19\nSubject_19\n139\n117\n22\nTRUE\n\n\nSubject_20\nSubject_20\n135\n113\n22\nTRUE\n\n\n\n\n\nTask 3\nIt turns out there was second round done with a placebo. We’re going to make the data set in the table above with that new data. There were ten subjects. The homework doesn’t say to do this, but I’m going to “name” them 21 through 30 so we don’t get confused.\n\nplacebo&lt;- data.frame(patient = paste(\"Subject\", 21:30, sep = \"_\"),\n                     pre_bp = c(138, 135, 147, 117, 152, 134, 114, 121, 131, 130),\n                     post_bp = c(105, 136, 123, 130, 134, 143, 135, 139, 120, 124))\nplacebo$diff_bp&lt;- placebo$pre_bp - placebo$post_bp\nplacebo$below120&lt;- ifelse(placebo$post_bp&lt;120, TRUE,FALSE)\n\nNow we get to make a list called treatment which has two elements: the data frame I just made and the one from task 2.\n\ntreatment&lt;- list(blood, placebo)\nnames(treatment)&lt;- c(\"treatment\", \"placebo\")\n\nNow I need to access the treatment in three different ways. I’ll use comments to number them out.\n\n#1\ntreatment[[1]]\n\n              patient pre_bp post_bp diff_bp below120\nSubject_1   Subject_1    130     114      16     TRUE\nSubject_2   Subject_2    128      98      30     TRUE\nSubject_3   Subject_3    116     113       3     TRUE\nSubject_4   Subject_4    124      99      25     TRUE\nSubject_5   Subject_5    133     107      26     TRUE\nSubject_6   Subject_6    134     116      18     TRUE\nSubject_7   Subject_7    118     113       5     TRUE\nSubject_8   Subject_8    126     111      15     TRUE\nSubject_9   Subject_9    114     119      -5     TRUE\nSubject_10 Subject_10    127     117      10     TRUE\nSubject_11 Subject_11    141     101      40     TRUE\nSubject_12 Subject_12    138     119      19     TRUE\nSubject_13 Subject_13    128     130      -2    FALSE\nSubject_14 Subject_14    140     122      18    FALSE\nSubject_15 Subject_15    137     106      31     TRUE\nSubject_16 Subject_16    131     106      25     TRUE\nSubject_17 Subject_17    120     124      -4    FALSE\nSubject_18 Subject_18    128     102      26     TRUE\nSubject_19 Subject_19    139     117      22     TRUE\nSubject_20 Subject_20    135     113      22     TRUE\n\n#2\ntreatment$treatment\n\n              patient pre_bp post_bp diff_bp below120\nSubject_1   Subject_1    130     114      16     TRUE\nSubject_2   Subject_2    128      98      30     TRUE\nSubject_3   Subject_3    116     113       3     TRUE\nSubject_4   Subject_4    124      99      25     TRUE\nSubject_5   Subject_5    133     107      26     TRUE\nSubject_6   Subject_6    134     116      18     TRUE\nSubject_7   Subject_7    118     113       5     TRUE\nSubject_8   Subject_8    126     111      15     TRUE\nSubject_9   Subject_9    114     119      -5     TRUE\nSubject_10 Subject_10    127     117      10     TRUE\nSubject_11 Subject_11    141     101      40     TRUE\nSubject_12 Subject_12    138     119      19     TRUE\nSubject_13 Subject_13    128     130      -2    FALSE\nSubject_14 Subject_14    140     122      18    FALSE\nSubject_15 Subject_15    137     106      31     TRUE\nSubject_16 Subject_16    131     106      25     TRUE\nSubject_17 Subject_17    120     124      -4    FALSE\nSubject_18 Subject_18    128     102      26     TRUE\nSubject_19 Subject_19    139     117      22     TRUE\nSubject_20 Subject_20    135     113      22     TRUE\n\n#3\ntreatment[[\"treatment\"]]\n\n              patient pre_bp post_bp diff_bp below120\nSubject_1   Subject_1    130     114      16     TRUE\nSubject_2   Subject_2    128      98      30     TRUE\nSubject_3   Subject_3    116     113       3     TRUE\nSubject_4   Subject_4    124      99      25     TRUE\nSubject_5   Subject_5    133     107      26     TRUE\nSubject_6   Subject_6    134     116      18     TRUE\nSubject_7   Subject_7    118     113       5     TRUE\nSubject_8   Subject_8    126     111      15     TRUE\nSubject_9   Subject_9    114     119      -5     TRUE\nSubject_10 Subject_10    127     117      10     TRUE\nSubject_11 Subject_11    141     101      40     TRUE\nSubject_12 Subject_12    138     119      19     TRUE\nSubject_13 Subject_13    128     130      -2    FALSE\nSubject_14 Subject_14    140     122      18    FALSE\nSubject_15 Subject_15    137     106      31     TRUE\nSubject_16 Subject_16    131     106      25     TRUE\nSubject_17 Subject_17    120     124      -4    FALSE\nSubject_18 Subject_18    128     102      26     TRUE\nSubject_19 Subject_19    139     117      22     TRUE\nSubject_20 Subject_20    135     113      22     TRUE\n\n\nNow that that’s done, I need to access the pre_bp column from placebo in one line.\n\ntreatment[[2]]$pre_bp\n\n [1] 138 135 147 117 152 134 114 121 131 130\n\n\nTask 4\nI need to insert a column called “status” into both data frames. I can’t do that within the list, so I can either go back and insert it into different tasks and make the time traveler joke again, or I could just do it here and then update the list.\n\nblood$status&lt;- character(20)\nplacebo$status&lt;- character(10)\ntreatment&lt;- list(blood, placebo)\nnames(treatment)&lt;- c(\"treatment\",\"placebo\")\n\nI could have just made the status column with an ifelse statement by now but I’m not in charge here so instead we’re going to use a for loop to do it. First, the treatment group.\n\nfor(i in length(treatment[[1]])){\n  if (treatment[[1]]$post_bp[i]&lt;120){\n    treatment[[1]]$status[i]&lt;- \"Optimal\"\n  } else if (treatment[[1]]$post_bp[i]&gt;130){\n    treatment[[1]]$status[i]&lt;- \"High\"\n  } else {\n    treatment[[1]]$status[i]&lt;- \"Borderline\"\n  }\n}\n\nAnd now the placebo.\n\nfor(i in length(treatment[[2]])){\n  if (treatment[[2]]$post_bp[i]&lt;120){\n    treatment[[2]]$status[i]&lt;- \"Optimal\"\n  } else if (treatment[[2]]$post_bp[i]&gt;130){\n    treatment[[2]]$status[i]&lt;- \"High\"\n  } else {\n    treatment[[2]]$status[i]&lt;- \"Borderline\"\n  }\n}\n\nFull disclosure, all I did was copy and paste that and replace the 1 index with 2 to reference the other data frame.\nTask 5\nWe’re going to write a function to do this for me. It needs to take in a list as an argument. It also needs to take an optional stat argument with the default being “mean.” It will then output a list of stats of interest for the six data columns of both data frames.\n\nsumlist&lt;- function(list, stat = \"mean\"){\n  myfun&lt;-get(stat) #This should return mean if no other user input\n  #These three should be the stats for the treatment \n  pre_t&lt;- myfun(list[[1]][,2])\n  post_t&lt;- myfun(list[[1]][,3])\n  diff_t&lt;- myfun(list[[1]][,4])\n  #These three should be placebo stats\n  pre_p&lt;- myfun(list[[2]][,2])\n  post_p&lt;- myfun(list[[2]][,3])\n  diff_p&lt;- myfun(list[[2]][,4])\n  #Now to make the list\n  output&lt;- list(c(pre_t,post_t,diff_t,pre_p,post_p,diff_p))\n  #names(output)&lt;- c(\"Pre-Treatment\",\"Post-Treatment\",\"Delta-Treatment\",\n   #                 \"Pre-Placebo\",\"Post-Placebo\",\"Delta-Placebo\")\n  return(output)\n}\n\nMoment of truth, does it work?\n\nsumlist(treatment)\n\n[[1]]\n[1] 129.35 112.35  17.00 131.90 128.90   3.00\n\nsumlist(treatment, \"var\")\n\n[[1]]\n[1]  64.55526  74.76579 153.68421 149.87778 124.98889 341.33333\n\nsumlist(treatment, \"sd\")\n\n[[1]]\n[1]  8.034629  8.646721 12.396944 12.242458 11.179843 18.475209\n\nsumlist(treatment, \"min\")\n\n[[1]]\n[1] 114  98  -5 114 105 -21\n\nsumlist(treatment, \"max\")\n\n[[1]]\n[1] 141 130  40 152 143  33"
  }
]